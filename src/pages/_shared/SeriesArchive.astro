---
import Layout from '~/layouts/Layout.astro'
import PageHeader from '~/components/PageHeader.astro'
import PostPreview from '~/components/PostPreview.astro'
import type { CollectionEntry } from 'astro:content'
import { defaultLang, useTranslations, type Lang } from '~/i18n/config'

interface Props {
  posts: CollectionEntry<'posts'>[]
  seriesTitle: string
  lang?: Lang
}

const { posts, seriesTitle, lang = defaultLang } = Astro.props as Props
const t = useTranslations(lang)
const pageTitle = `${t('series.titlePrefix')}: ${seriesTitle}`
const description = t('series.description', { series: seriesTitle })
---

<Layout lang={lang} title={pageTitle} description={description}>
  <div class="mt-2 sm:mt-0">
    <PageHeader lang={lang} titlePieces={[t('series.breadcrumb'), seriesTitle]} />
    {posts.map((post) => (
      <PostPreview post={post} lang={lang} />
    ))}
  </div>
</Layout>
